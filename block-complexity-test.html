<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>æ–¹å—å¤æ‚åº¦æµ‹è¯•</title>
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
            color: #fff;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            color: #00d4ff;
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5em;
        }
        .difficulty-section {
            background: rgba(26, 26, 26, 0.8);
            border: 2px solid #39ff14;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .difficulty-title {
            color: #39ff14;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }
        .level-tests {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .level-test {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #333;
            border-radius: 10px;
            padding: 15px;
        }
        .level-header {
            color: #00d4ff;
            font-size: 1.2em;
            margin-bottom: 10px;
            text-align: center;
        }
        .block-samples {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }
        .block-sample {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #555;
            border-radius: 4px;
            padding: 4px;
            min-width: 60px;
            text-align: center;
            font-size: 0.8em;
        }
        .rarity-1 { border-color: #39ff14; color: #39ff14; }
        .rarity-2 { border-color: #00d4ff; color: #00d4ff; }
        .rarity-3 { border-color: #ffff00; color: #ffff00; }
        .rarity-4 { border-color: #ff8800; color: #ff8800; }
        .rarity-5 { border-color: #ff4444; color: #ff4444; }
        .rarity-6 { border-color: #8000ff; color: #8000ff; }
        .stats {
            margin-top: 15px;
            font-size: 0.9em;
        }
        .improvement-box {
            background: rgba(57, 255, 20, 0.1);
            border: 2px solid #39ff14;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .improvement-title {
            color: #39ff14;
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        .improvement-list {
            list-style: none;
            padding: 0;
        }
        .improvement-list li {
            margin: 10px 0;
            padding-left: 25px;
            position: relative;
        }
        .improvement-list li:before {
            content: "âœ…";
            position: absolute;
            left: 0;
            color: #39ff14;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§© æ–¹å—å¤æ‚åº¦æ”¹è¿›æµ‹è¯•</h1>
        
        <div class="improvement-box">
            <div class="improvement-title">ğŸ¯ ä¿®å¤å†…å®¹</div>
            <ul class="improvement-list">
                <li><strong>ä¿®å¤é‡æ–°ç”Ÿæˆé€»è¾‘</strong> - å€™é€‰æ–¹å—ç”¨å®Œåé‡æ–°ç”Ÿæˆæ—¶ç°åœ¨ä¹Ÿä¼šè€ƒè™‘éš¾åº¦åŠ æˆ</li>
                <li><strong>å¢å¼ºéš¾åº¦è®¾ç½®</strong> - è°ƒæ•´äº†å„éš¾åº¦çš„blockComplexityBonuså€¼</li>
                <li><strong>ä¼˜åŒ–æ–¹å—åˆ†å¸ƒ</strong> - æ”¹è¿›äº†æ ¹æ®levelè·å–æ–¹å—çš„é€»è¾‘</li>
                <li><strong>æ”¹è¿›æƒé‡ç³»ç»Ÿ</strong> - é«˜éš¾åº¦ä¸‹å¤æ‚æ–¹å—å‡ºç°æ¦‚ç‡å¤§å¹…æå‡</li>
                <li><strong>ç‰¹æ®Šå¥–åŠ±æœºåˆ¶</strong> - æœ€é«˜éš¾åº¦æ—¶å·¨å‹æ–¹å—æƒé‡é¢å¤–æå‡</li>
            </ul>
        </div>

        <div class="difficulty-section">
            <div class="difficulty-title">ğŸŒ± ç®€å•éš¾åº¦ï¼ˆblockComplexityBonus: -1ï¼‰</div>
            <div class="level-tests">
                <div class="level-test">
                    <div class="level-header">å®é™…Level: 0</div>
                    <div class="block-samples" id="easy-samples"></div>
                    <div class="stats" id="easy-stats"></div>
                </div>
            </div>
        </div>

        <div class="difficulty-section">
            <div class="difficulty-title">âš–ï¸ æ™®é€šéš¾åº¦ï¼ˆblockComplexityBonus: 0ï¼‰</div>
            <div class="level-tests">
                <div class="level-test">
                    <div class="level-header">å®é™…Level: 1</div>
                    <div class="block-samples" id="normal-samples"></div>
                    <div class="stats" id="normal-stats"></div>
                </div>
            </div>
        </div>

        <div class="difficulty-section">
            <div class="difficulty-title">ğŸ”¥ å›°éš¾éš¾åº¦ï¼ˆblockComplexityBonus: 2ï¼‰</div>
            <div class="level-tests">
                <div class="level-test">
                    <div class="level-header">å®é™…Level: 3</div>
                    <div class="block-samples" id="hard-samples"></div>
                    <div class="stats" id="hard-stats"></div>
                </div>
            </div>
        </div>

        <div class="difficulty-section">
            <div class="difficulty-title">ğŸ’€ ä¸“å®¶éš¾åº¦ï¼ˆblockComplexityBonus: 3ï¼‰</div>
            <div class="level-tests">
                <div class="level-test">
                    <div class="level-header">å®é™…Level: 4</div>
                    <div class="block-samples" id="expert-samples"></div>
                    <div class="stats" id="expert-stats"></div>
                </div>
            </div>
        </div>

        <div class="difficulty-section">
            <div class="difficulty-title">ğŸ‘¹ å™©æ¢¦éš¾åº¦ï¼ˆblockComplexityBonus: 4ï¼‰</div>
            <div class="level-tests">
                <div class="level-test">
                    <div class="level-header">å®é™…Level: 6</div>
                    <div class="block-samples" id="nightmare-samples"></div>
                    <div class="stats" id="nightmare-stats"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸBlockShapesç±»çš„ç®€åŒ–ç‰ˆæœ¬
        const blockShapes = [
            // ç¨€æœ‰åº¦1ï¼š1-2æ ¼æ–¹å—
            { name: 'å•æ ¼', rarity: 1, size: 1 },
            { name: 'åŒæ ¼H', rarity: 1, size: 2 },
            { name: 'åŒæ ¼V', rarity: 1, size: 2 },
            
            // ç¨€æœ‰åº¦2ï¼š3æ ¼æ–¹å—
            { name: 'ä¸‰æ ¼H', rarity: 2, size: 3 },
            { name: 'ä¸‰æ ¼V', rarity: 2, size: 3 },
            { name: 'Lå½¢3-1', rarity: 2, size: 3 },
            { name: 'Lå½¢3-2', rarity: 2, size: 3 },
            
            // ç¨€æœ‰åº¦3ï¼šç»å…¸ä¿„ç½—æ–¯æ–¹å—
            { name: 'Iå½¢', rarity: 3, size: 4 },
            { name: 'Oå½¢', rarity: 3, size: 4 },
            { name: 'Tå½¢', rarity: 3, size: 4 },
            { name: 'Lå½¢', rarity: 3, size: 4 },
            { name: 'Jå½¢', rarity: 3, size: 4 },
            { name: 'Så½¢', rarity: 3, size: 4 },
            { name: 'Zå½¢', rarity: 3, size: 4 },
            
            // ç¨€æœ‰åº¦4ï¼šäº”æ ¼æ–¹å—(Pentomino)
            { name: 'På½¢äº”æ ¼', rarity: 4, size: 5 },
            { name: 'Uå½¢äº”æ ¼', rarity: 4, size: 5 },
            { name: 'Wå½¢äº”æ ¼', rarity: 4, size: 5 },
            { name: 'Yå½¢äº”æ ¼', rarity: 4, size: 5 },
            { name: 'Xå½¢äº”æ ¼', rarity: 4, size: 5 },
            { name: 'Nå½¢äº”æ ¼', rarity: 4, size: 5 },
            { name: 'Få½¢äº”æ ¼', rarity: 4, size: 5 },
            { name: 'å¤§åå­—', rarity: 4, size: 5 },
            { name: 'é’»çŸ³äº”æ ¼', rarity: 4, size: 5 },
            { name: 'çˆªå½¢äº”æ ¼', rarity: 4, size: 5 },
            { name: 'äº”æ ¼ç›´çº¿', rarity: 4, size: 5 },
            
            // ç¨€æœ‰åº¦5ï¼šå¤§å‹æ–¹å—
            { name: 'è§’å½¢å…­æ ¼', rarity: 5, size: 6 },
            { name: 'é˜¶æ¢¯å…­æ ¼', rarity: 5, size: 6 },
            { name: 'å¤§Lå½¢', rarity: 5, size: 7 },
            { name: 'å…­æ ¼ç›´çº¿', rarity: 5, size: 6 },
            { name: '3x3æ–¹å½¢', rarity: 5, size: 9 },
            { name: 'é”¯é½¿å…­æ ¼', rarity: 5, size: 6 },
            
            // ç¨€æœ‰åº¦6ï¼šå·¨å‹æ–¹å—
            { name: 'å·¨å‹åå­—', rarity: 6, size: 9 }
        ];

        function getShapesByDifficulty(level) {
            if (level <= 0) {
                return blockShapes.filter(shape => shape.rarity === 1 && shape.size === 1);
            } else if (level <= 1) {
                return blockShapes.filter(shape => shape.rarity <= 1);
            } else if (level <= 2) {
                return blockShapes.filter(shape => shape.rarity <= 2);
            } else if (level <= 3) {
                return blockShapes.filter(shape => shape.rarity <= 3);
            } else if (level <= 4) {
                return blockShapes.filter(shape => shape.rarity <= 4);
            } else if (level <= 5) {
                return blockShapes.filter(shape => shape.rarity <= 5);
            } else {
                return blockShapes;
            }
        }

        function getRandomShape(level) {
            const availableShapes = getShapesByDifficulty(level);
            
            const weights = availableShapes.map(shape => {
                const baseWeight = 8 - shape.rarity;
                
                let levelBonus = 0;
                if (level >= 3) {
                    levelBonus = Math.min(4, Math.floor((level - 2) * 1.5));
                    
                    if (shape.rarity >= 4) {
                        levelBonus += Math.min(3, level - 3);
                    }
                    if (shape.rarity >= 5) {
                        levelBonus += Math.min(2, level - 4);
                    }
                    if (shape.rarity >= 6) {
                        levelBonus += Math.min(2, level - 5);
                    }
                }
                
                if (level >= 6 && shape.rarity >= 5) {
                    levelBonus += 3;
                }
                
                return Math.max(1, baseWeight + levelBonus);
            });
            
            const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
            let random = Math.random() * totalWeight;
            
            for (let i = 0; i < availableShapes.length; i++) {
                random -= weights[i];
                if (random <= 0) {
                    return availableShapes[i];
                }
            }
            
            return availableShapes[availableShapes.length - 1];
        }

        function testDifficulty(level, containerId, statsId) {
            const samples = [];
            const rarityCount = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };
            
            // ç”Ÿæˆ100ä¸ªæ ·æœ¬
            for (let i = 0; i < 100; i++) {
                const shape = getRandomShape(level);
                samples.push(shape);
                rarityCount[shape.rarity]++;
            }
            
            // æ˜¾ç¤ºå‰20ä¸ªæ ·æœ¬
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            samples.slice(0, 20).forEach(shape => {
                const div = document.createElement('div');
                div.className = `block-sample rarity-${shape.rarity}`;
                div.textContent = `${shape.name} (${shape.size})`;
                div.title = `ç¨€æœ‰åº¦: ${shape.rarity}, å¤§å°: ${shape.size}æ ¼`;
                container.appendChild(div);
            });
            
            // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
            const statsContainer = document.getElementById(statsId);
            const total = samples.length;
            statsContainer.innerHTML = `
                <div>æ€»æ ·æœ¬: ${total}</div>
                <div>ç¨€æœ‰åº¦1: ${rarityCount[1]} (${(rarityCount[1]/total*100).toFixed(1)}%)</div>
                <div>ç¨€æœ‰åº¦2: ${rarityCount[2]} (${(rarityCount[2]/total*100).toFixed(1)}%)</div>
                <div>ç¨€æœ‰åº¦3: ${rarityCount[3]} (${(rarityCount[3]/total*100).toFixed(1)}%)</div>
                <div>ç¨€æœ‰åº¦4: ${rarityCount[4]} (${(rarityCount[4]/total*100).toFixed(1)}%)</div>
                <div>ç¨€æœ‰åº¦5: ${rarityCount[5]} (${(rarityCount[5]/total*100).toFixed(1)}%)</div>
                <div>ç¨€æœ‰åº¦6: ${rarityCount[6]} (${(rarityCount[6]/total*100).toFixed(1)}%)</div>
                <div style="color: #39ff14; margin-top: 10px;">
                    å¤æ‚æ–¹å—(4+): ${rarityCount[4] + rarityCount[5] + rarityCount[6]} 
                    (${((rarityCount[4] + rarityCount[5] + rarityCount[6])/total*100).toFixed(1)}%)
                </div>
            `;
        }

        // é¡µé¢åŠ è½½æ—¶è¿è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ§ª æµ‹è¯•æ–¹å—å¤æ‚åº¦åˆ†å¸ƒ...');
            
            // æµ‹è¯•å„ä¸ªéš¾åº¦å¯¹åº”çš„å®é™…level
            testDifficulty(0, 'easy-samples', 'easy-stats');      // ç®€å•: 1 + (-1) = 0
            testDifficulty(1, 'normal-samples', 'normal-stats');   // æ™®é€š: 1 + 0 = 1  
            testDifficulty(3, 'hard-samples', 'hard-stats');       // å›°éš¾: 1 + 2 = 3
            testDifficulty(4, 'expert-samples', 'expert-stats');   // ä¸“å®¶: 1 + 3 = 4
            testDifficulty(6, 'nightmare-samples', 'nightmare-stats'); // å™©æ¢¦: 2 + 4 = 6

            console.log('âœ… æ–¹å—å¤æ‚åº¦æµ‹è¯•å®Œæˆ');
        });
    </script>
</body>
</html> 